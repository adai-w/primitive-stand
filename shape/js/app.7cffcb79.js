(function(t){function e(e){for(var n,o,s=e[0],l=e[1],c=e[2],h=0,p=[];h<s.length;h++)o=s[h],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(p.length)p.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,s=1;s<i.length;s++){var l=i[s];0!==r[l]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=i[0]))}return t}var n={},r={app:0},a=[];function o(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"25f5":function(t,e,i){var n,r,a,o;i("4160"),i("c975"),i("fb6a"),i("a434"),i("b0c0"),i("d3b7"),i("ac1f"),i("466d"),i("38cf"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),i("159b");var s=i("7037");(function(i){"object"===s(e)&&"undefined"!==typeof t?t.exports=i():(r=[],n=i,a="function"===typeof n?n.apply(e,r):n,void 0===a||(t.exports=a))})((function(){return function t(e,i,n){function r(s,l){if(!i[s]){if(!e[s]){var c="function"==typeof o&&o;if(!l&&c)return o(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){var i=e[s][1][t];return r(i||t)}),h,h.exports,t,e,i,n)}return i[s].exports}for(var a="function"==typeof o&&o,s=0;s<n.length;s++)r(n[s]);return r}({1:[function(t,e,i){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(t){return"function"===typeof t}function a(t){return"number"===typeof t}function o(t){return"object"===s(t)&&null!==t}function l(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!a(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,i,n,a,s,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(i=this._events[t],l(i))return!1;if(r(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),i.apply(this,a)}else if(o(i))for(a=Array.prototype.slice.call(arguments,1),c=i.slice(),n=c.length,s=0;s<n;s++)c[s].apply(this,a);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=l(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"===typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){if(!r(e))throw TypeError("listener must be a function");var i=!1;function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var i,n,a,s;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],a=i.length,n=-1,i===e||r(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(i)){for(s=a;s-- >0;)if(i[s]===e||i[s].listener&&i[s].listener===e){n=s;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],r(i))this.removeListener(t,i);else if(i)while(i.length)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[],e},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},{}],2:[function(t,e,i){var n,r,a,o,s;s=navigator.userAgent.toLowerCase(),o=navigator.platform.toLowerCase(),n=s.match(/(opera|ie|firefox|chrome|version)[\s\/:]([\w\d\.]+)?.*?(safari|version[\s\/:]([\w\d\.]+)|$)/)||[null,"unknown",0],a="ie"===n[1]&&document.documentMode,r={name:"version"===n[1]?n[3]:n[1],version:a||parseFloat("opera"===n[1]&&n[4]?n[4]:n[2]),platform:{name:s.match(/ip(?:ad|od|hone)/)?"ios":(s.match(/(?:webos|android)/)||o.match(/mac|win|linux/)||["other"])[0]}},r[r.name]=!0,r[r.name+parseInt(r.version,10)]=!0,r.platform[r.platform.name]=!0,e.exports=r},{}],3:[function(t,e,i){var n,r,a,o=function(t,e){for(var i in e)s.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty,l=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},c=[].slice;n=t("events").EventEmitter,a=t("./browser.coffee"),r=function(t){var e,i;function n(t){var i,n,r;for(n in this.running=!1,this.options={},this.frames=[],this.freeWorkers=[],this.activeWorkers=[],this.setOptions(t),e)r=e[n],null==(i=this.options)[n]&&(i[n]=r)}return o(n,t),e={workerScript:"gif.worker.js",workers:2,repeat:0,background:"#fff",quality:10,width:null,height:null,transparent:null,debug:!1,dither:!1},i={delay:500,copy:!1},n.prototype.setOption=function(t,e){if(this.options[t]=e,null!=this._canvas&&("width"===t||"height"===t))return this._canvas[t]=e},n.prototype.setOptions=function(t){var e,i,n;for(e in i=[],t)s.call(t,e)&&(n=t[e],i.push(this.setOption(e,n)));return i},n.prototype.addFrame=function(t,e){var n,r;for(r in null==e&&(e={}),n={},n.transparent=this.options.transparent,i)n[r]=e[r]||i[r];if(null==this.options.width&&this.setOption("width",t.width),null==this.options.height&&this.setOption("height",t.height),"undefined"!==typeof ImageData&&null!==ImageData&&t instanceof ImageData)n.data=t.data;else if("undefined"!==typeof CanvasRenderingContext2D&&null!==CanvasRenderingContext2D&&t instanceof CanvasRenderingContext2D||"undefined"!==typeof WebGLRenderingContext&&null!==WebGLRenderingContext&&t instanceof WebGLRenderingContext)e.copy?n.data=this.getContextData(t):n.context=t;else{if(null==t.childNodes)throw new Error("Invalid image");e.copy?n.data=this.getImageData(t):n.image=t}return this.frames.push(n)},n.prototype.render=function(){var t,e,i;if(this.running)throw new Error("Already running");if(null==this.options.width||null==this.options.height)throw new Error("Width and height must be set prior to rendering");if(this.running=!0,this.nextFrame=0,this.finishedFrames=0,this.imageParts=function(){var t,e,i;for(i=[],t=0,e=this.frames.length;0<=e?t<e:t>e;0<=e?++t:--t)i.push(null);return i}.call(this),e=this.spawnWorkers(),!0===this.options.globalPalette)this.renderNextFrame();else for(t=0,i=e;0<=i?t<i:t>i;0<=i?++t:--t)this.renderNextFrame();return this.emit("start"),this.emit("progress",0)},n.prototype.abort=function(){var t;while(1){if(t=this.activeWorkers.shift(),null==t)break;this.log("killing active worker"),t.terminate()}return this.running=!1,this.emit("abort")},n.prototype.spawnWorkers=function(){var t,e,i;return t=Math.min(this.options.workers,this.frames.length),function(){i=[];for(var n=e=this.freeWorkers.length;e<=t?n<t:n>t;e<=t?n++:n--)i.push(n);return i}.apply(this).forEach(function(t){return function(e){var i;return t.log("spawning worker "+e),i=new Worker(t.options.workerScript),i.onmessage=function(e){return t.activeWorkers.splice(t.activeWorkers.indexOf(i),1),t.freeWorkers.push(i),t.frameFinished(e.data)},t.freeWorkers.push(i)}}(this)),t},n.prototype.frameFinished=function(t){var e,i;if(this.log("frame "+t.index+" finished - "+this.activeWorkers.length+" active"),this.finishedFrames++,this.emit("progress",this.finishedFrames/this.frames.length),this.imageParts[t.index]=t,!0===this.options.globalPalette&&(this.options.globalPalette=t.globalPalette,this.log("global palette analyzed"),this.frames.length>2))for(e=1,i=this.freeWorkers.length;1<=i?e<i:e>i;1<=i?++e:--e)this.renderNextFrame();return l.call(this.imageParts,null)>=0?this.renderNextFrame():this.finishRendering()},n.prototype.finishRendering=function(){var t,e,i,n,r,a,o,s,l,c,u,h,p,d,f,g;for(s=0,d=this.imageParts,r=0,l=d.length;r<l;r++)e=d[r],s+=(e.data.length-1)*e.pageSize+e.cursor;for(s+=e.pageSize-e.cursor,this.log("rendering finished - filesize "+Math.round(s/1e3)+"kb"),t=new Uint8Array(s),h=0,f=this.imageParts,a=0,c=f.length;a<c;a++)for(e=f[a],g=e.data,i=o=0,u=g.length;o<u;i=++o)p=g[i],t.set(p,h),i===e.data.length-1?h+=e.cursor:h+=e.pageSize;return n=new Blob([t],{type:"image/gif"}),this.emit("finished",n,t)},n.prototype.renderNextFrame=function(){var t,e,i;if(0===this.freeWorkers.length)throw new Error("No free workers");if(!(this.nextFrame>=this.frames.length))return t=this.frames[this.nextFrame++],i=this.freeWorkers.shift(),e=this.getTask(t),this.log("starting frame "+(e.index+1)+" of "+this.frames.length),this.activeWorkers.push(i),i.postMessage(e)},n.prototype.getContextData=function(t){return t.getImageData(0,0,this.options.width,this.options.height).data},n.prototype.getImageData=function(t){var e;return null==this._canvas&&(this._canvas=document.createElement("canvas"),this._canvas.width=this.options.width,this._canvas.height=this.options.height),e=this._canvas.getContext("2d"),e.setFill=this.options.background,e.fillRect(0,0,this.options.width,this.options.height),e.drawImage(t,0,0),this.getContextData(e)},n.prototype.getTask=function(t){var e,i;if(e=this.frames.indexOf(t),i={index:e,last:e===this.frames.length-1,delay:t.delay,transparent:t.transparent,width:this.options.width,height:this.options.height,quality:this.options.quality,dither:this.options.dither,globalPalette:this.options.globalPalette,repeat:this.options.repeat,canTransfer:"chrome"===a.name},null!=t.data)i.data=t.data;else if(null!=t.context)i.data=this.getContextData(t.context);else{if(null==t.image)throw new Error("Invalid frame");i.data=this.getImageData(t.image)}return i},n.prototype.log=function(){var t;if(t=1<=arguments.length?c.call(arguments,0):[],this.options.debug)return console.log.apply(console,t)},n}(n),e.exports=r},{"./browser.coffee":2,events:1}]},{},[3])(3)}))},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("img",{staticStyle:{visibility:"hidden",width:"1080px",height:"1920px"},attrs:{id:"shareBg",src:"/picture/share-bg.png"}}),i("canvas",{staticStyle:{display:"none"},attrs:{id:"drawFrame"}}),i("canvas",{staticStyle:{display:"none",position:"fixed",left:"0",top:"0"},attrs:{id:"sharePoster",width:"1080",height:"1920"}}),i("div",{attrs:{id:"inputTextSvg",width:"80%",height:"200px"}}),i("div",{class:0==t.pageIndex||5==t.pageIndex?"bg"+t.pageIndex:"bg1234"}),i("canvas",{class:0==t.pageIndex||5==t.pageIndex?"show"+t.pageIndex:"show1234",attrs:{id:"canvas",width:"1080px",height:"1920px"}}),i("img",{attrs:{id:"canvasCopy",src:""}}),i("video",{class:0==t.pageIndex||5==t.pageIndex?"screen"+t.pageIndex:"screen1234",attrs:{preload:"auto",src:"/video/screen.mp4",autoplay:"",loop:"",muted:""},domProps:{muted:!0}}),i("video",{class:0==t.pageIndex||5==t.pageIndex?"video"+t.pageIndex:"video1234",attrs:{id:"videoel",preload:"auto",autoPlay:""}}),i("img",{staticClass:"title",attrs:{src:"/picture/title"+t.pageIndex+"@x3.png",alt:"magic draw"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.pageIndex>=4,expression:"pageIndex >= 4"}],style:5==t.pageIndex?"transform: scale(0.8); transform-origin: 50% 35%;":"",attrs:{id:"paint"}}),i("img",{directives:[{name:"show",rawName:"v-show",value:0==t.pageIndex,expression:"pageIndex == 0"}],staticClass:"decor-bottom",attrs:{src:"/picture/decor-bottom.png"}}),i("img",{class:0==t.pageIndex||5==t.pageIndex?"machine"+t.pageIndex:"machine1234",attrs:{src:"/picture/machine@x3.png",alt:"machine"}}),i("img",{directives:[{name:"show",rawName:"v-show",value:0==t.pageIndex,expression:"pageIndex == 0"}],staticClass:"decor-top",attrs:{src:"/picture/decor-top.png"}}),t.count<=3&&t.count>=1?i("img",{staticClass:"count",attrs:{src:"/picture/count"+t.count+"@x3.png"}}):t._e(),i("div",{attrs:{id:"overlay"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.pageIndex,expression:"pageIndex == 3"}],staticClass:"shape-container"},[i("div",{staticClass:"text"},[t._v("请选择：")]),i("div",{staticClass:"shapes"},t._l(t.shapeList,(function(e){return i("img",{key:e,class:e==t.shape?"checked-shape":"shape",attrs:{src:"/picture/"+e+".png"},on:{click:t.setShape}})})),0)]),i("img",{class:0==t.pageIndex||5==t.pageIndex?"bottom-info"+t.pageIndex:"bottom-info1234",attrs:{src:"/picture/infobottom"+t.pageIndex+"@x3.png",alt:"info bottom"}}),i("canvas",{directives:[{name:"show",rawName:"v-show",value:5==t.pageIndex,expression:"pageIndex == 5"}],attrs:{id:"shareQrcode"}}),i("img",{directives:[{name:"show",rawName:"v-show",value:5==t.pageIndex,expression:"pageIndex == 5"}],attrs:{id:"qrcode",src:"/picture/qrcode.jpg"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:5==t.pageIndex,expression:"pageIndex == 5"}],staticClass:"timestamp"},[t._v(t._s(t.timestamp))]),i("img",{directives:[{name:"show",rawName:"v-show",value:3!=t.pageIndex,expression:"pageIndex != 3"}],class:0==t.pageIndex||5==t.pageIndex?"btn0"+t.pageIndex:"btn01234",attrs:{src:"/picture/btn00@x3.png",alt:"button"},on:{click:t.firstPageAni}}),i("img",{class:0==t.pageIndex||5==t.pageIndex?"back-btn"+t.pageIndex:"back-btn1234",attrs:{src:"/picture/back-normal@x3.png",alt:"button"},on:{click:t.back}}),i("img",{directives:[{name:"show",rawName:"v-show",value:0==t.pageIndex,expression:"pageIndex == 0"}],staticClass:"btn0",attrs:{src:"/picture/btn0@x3.png",alt:"button"},on:{click:t.next}}),i("img",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"btn1234",attrs:{src:"/picture/btn1@x3.png",alt:"button"},on:{click:t.next}}),i("img",{directives:[{name:"show",rawName:"v-show",value:2==t.pageIndex,expression:"pageIndex == 2"}],staticClass:"btn1234",attrs:{src:"/picture/btn2@x3.png",alt:"button"},on:{click:t.next}}),i("img",{directives:[{name:"show",rawName:"v-show",value:3==t.pageIndex,expression:"pageIndex == 3"}],staticClass:"btn1234",attrs:{src:"/picture/btn3@x3.png",alt:"button"},on:{click:t.next}}),i("img",{directives:[{name:"show",rawName:"v-show",value:4==t.pageIndex,expression:"pageIndex == 4"}],staticClass:"btn1234",attrs:{src:"/picture/btn4@x3.png",alt:"button"},on:{click:t.next}}),i("img",{directives:[{name:"show",rawName:"v-show",value:5==t.pageIndex,expression:"pageIndex == 5"}],staticClass:"btn5",attrs:{src:"/picture/btn5@x3.png",alt:"button"},on:{click:t.next}}),i("img",{directives:[{name:"show",rawName:"v-show",value:t.isLoading&&4==t.pageIndex,expression:"isLoading && pageIndex == 4"}],staticClass:"loading",attrs:{src:"/picture/loading.gif"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[i("audio",{attrs:{id:"button-audio",src:"/audio/button.mp3",preload:""}}),i("audio",{attrs:{id:"count-audio",src:"/audio/count.mp3",preload:""}}),i("audio",{attrs:{id:"keyboard-audio",src:"/audio/keyboard.mp3",preload:""}}),i("audio",{attrs:{id:"shoot-audio",src:"/audio/shoot.mp3",preload:""}})])])},a=[],o=(i("cb29"),i("b0c0"),i("d3b7"),i("ac1f"),i("25f0"),i("5319"),i("1276"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.keyboardClass})}),s=[],l=i("dd7f"),c=i.n(l),u=(i("d2db"),{name:"SimpleKeyboard",props:{keyboardClass:{default:"simple-keyboard",type:String},input:{type:String}},data:function(){return{keyboard:null}},mounted:function(){this.keyboard=new c.a({onChange:this.onChange,onKeyPress:this.onKeyPress})},methods:{onChange:function(t){this.$emit("onChange",t)},onKeyPress:function(t){this.$emit("onKeyPress",t),"{shift}"!==t&&"{lock}"!==t||this.handleShift()},handleShift:function(){var t=this.keyboard.options.layoutName,e="default"===t?"shift":"default";this.keyboard.setOptions({layoutName:e})}},watch:{input:function(t){this.keyboard.setInput(t)}}}),h=u,p=i("2877"),d=Object(p["a"])(h,o,s,!1,null,"45ac0b00",null),f=d.exports,g=i("d055"),m=i.n(g),v=i("4378"),x=(i("a15b"),i("fb6a"),i("4d63"),i("cfc3"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),function(t,e,i){var n=function(t,e,i){var n=new RegExp("\\b"+e+" \\w+ (\\w+)","ig");t.replace(n,(function(t,e){return i[e]=0,t}))},r=function(t,e,i){var n=t.createShader(i);return t.shaderSource(n,e),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)?n:(console.log(t.getShaderInfoLog(n)),null)};this.uniform={},this.attribute={};var a=r(t,e,t.VERTEX_SHADER),o=r(t,i,t.FRAGMENT_SHADER);for(var s in this.id=t.createProgram(),t.attachShader(this.id,a),t.attachShader(this.id,o),t.linkProgram(this.id),t.getProgramParameter(this.id,t.LINK_STATUS)||console.log(t.getProgramInfoLog(this.id)),t.useProgram(this.id),n(e,"attribute",this.attribute),this.attribute)this.attribute[s]=t.getAttribLocation(this.id,s);for(var l in n(e,"uniform",this.uniform),n(i,"uniform",this.uniform),this.uniform)this.uniform[l]=t.getUniformLocation(this.id,l)}),y=window.WebGLImageFilter=function(t){t||(t={});var e=null,i=0,n=null,r=!1,a=-1,o=[null,null],s=[],l=-1,c=-1,u=null,h=null,p=t.canvas||document.createElement("canvas"),d={};if(e=p.getContext("webgl")||p.getContext("experimental-webgl"),!e)throw"Couldn't get WebGL context";this.addFilter=function(t){var e=Array.prototype.slice.call(arguments,1),i=T[t];s.push({func:i,args:e})},this.reset=function(){s=[]};var f=!1;this.apply=function(t){if(g(t.width,t.height),i=0,n||(n=e.createTexture()),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),f?e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,t):(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t),f=!0),0==s.length)return b(E.FRAGMENT_IDENTITY),y(),p;for(var a=0;a<s.length;a++){r=a==s.length-1;var o=s[a];o.func.apply(this,o.args||[])}return p};var g=function(t,i){if(t!=l||i!=c){if(p.width=l=t,p.height=c=i,!u){var n=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,-1,1,0,0,1,-1,1,1,1,1,1,0]);u=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}e.viewport(0,0,l,c),o=[null,null]}},m=function(t){return o[t]=o[t]||v(l,c),o[t]},v=function(t,i){var n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n);var r=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,r);var a=e.createTexture();return e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,i,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,a,0),e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),{fbo:n,texture:a}},y=function(t){var o=null,s=null,l=!1;o=0==i?n:m(a).texture,i++,!r||t&w.INTERMEDIATE?(a=(a+1)%2,s=m(a).fbo):(s=null,l=i%2==0),e.bindTexture(e.TEXTURE_2D,o),e.bindFramebuffer(e.FRAMEBUFFER,s),e.uniform1f(h.uniform.flipY,l?-1:1),e.drawArrays(e.TRIANGLES,0,6)},b=function(t){if(d[t])return h=d[t],e.useProgram(h.id),h;h=new x(e,E.VERTEX_IDENTITY,t);var i=Float32Array.BYTES_PER_ELEMENT,n=4*i;return e.enableVertexAttribArray(h.attribute.pos),e.vertexAttribPointer(h.attribute.pos,2,e.FLOAT,!1,n,0*i),e.enableVertexAttribArray(h.attribute.uv),e.vertexAttribPointer(h.attribute.uv,2,e.FLOAT,!1,n,2*i),d[t]=h,h},w={INTERMEDIATE:1},E={};E.VERTEX_IDENTITY=["precision highp float;","attribute vec2 pos;","attribute vec2 uv;","varying vec2 vUv;","uniform float flipY;","void main(void) {","vUv = uv;","gl_Position = vec4(pos.x, pos.y*flipY, 0.0, 1.);","}"].join("\n"),E.FRAGMENT_IDENTITY=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","void main(void) {","gl_FragColor = texture2D(texture, vUv);","}"].join("\n");var T={colorMatrix:function(t){var i=new Float32Array(t);i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255;var n=1==i[18]&&0==i[3]&&0==i[8]&&0==i[13]&&0==i[15]&&0==i[16]&&0==i[17]&&0==i[19]?T.colorMatrix.SHADER.WITHOUT_ALPHA:T.colorMatrix.SHADER.WITH_ALPHA,r=b(n);e.uniform1fv(r.uniform.m,i),y()}};T.colorMatrix.SHADER={},T.colorMatrix.SHADER.WITH_ALPHA=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform float m[20];","void main(void) {","vec4 c = texture2D(texture, vUv);","gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4];","gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9];","gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14];","gl_FragColor.a = m[15] * c.r + m[16] * c.g + m[17] * c.b + m[18] * c.a + m[19];","}"].join("\n"),T.colorMatrix.SHADER.WITHOUT_ALPHA=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform float m[20];","void main(void) {","vec4 c = texture2D(texture, vUv);","gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[4];","gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[9];","gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[14];","gl_FragColor.a = c.a;","}"].join("\n"),T.brightness=function(t){var e=(t||0)+1;T.colorMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0])},T.saturation=function(t){var e=2*(t||0)/3+1,i=-.5*(e-1);T.colorMatrix([e,i,i,0,0,i,e,i,0,0,i,i,e,0,0,0,0,0,1,0])},T.desaturate=function(){T.saturation(-1)},T.contrast=function(t){var e=(t||0)+1,i=-128*(e-1);T.colorMatrix([e,0,0,0,i,0,e,0,0,i,0,0,e,0,i,0,0,0,1,0])},T.negative=function(){T.contrast(-2)},T.hue=function(t){t=(t||0)/180*Math.PI;var e=Math.cos(t),i=Math.sin(t),n=.213,r=.715,a=.072;T.colorMatrix([n+e*(1-n)+i*-n,r+e*-r+i*-r,a+e*-a+i*(1-a),0,0,n+e*-n+.143*i,r+e*(1-r)+.14*i,a+e*-a+-.283*i,0,0,n+e*-n+i*-(1-n),r+e*-r+i*r,a+e*(1-a)+i*a,0,0,0,0,0,1,0])},T.desaturateLuminance=function(){T.colorMatrix([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0])},T.sepia=function(){T.colorMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0])},T.brownie=function(){T.colorMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0])},T.vintagePinhole=function(){T.colorMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0])},T.kodachrome=function(){T.colorMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0])},T.technicolor=function(){T.colorMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0])},T.polaroid=function(){T.colorMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0])},T.shiftToBGR=function(){T.colorMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0])},T.convolution=function(t){var i=new Float32Array(t),n=1/l,r=1/c,a=b(T.convolution.SHADER);e.uniform1fv(a.uniform.m,i),e.uniform2f(a.uniform.px,n,r),y()},T.convolution.SHADER=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform vec2 px;","uniform float m[9];","void main(void) {","vec4 c11 = texture2D(texture, vUv - px);","vec4 c12 = texture2D(texture, vec2(vUv.x, vUv.y - px.y));","vec4 c13 = texture2D(texture, vec2(vUv.x + px.x, vUv.y - px.y));","vec4 c21 = texture2D(texture, vec2(vUv.x - px.x, vUv.y) );","vec4 c22 = texture2D(texture, vUv);","vec4 c23 = texture2D(texture, vec2(vUv.x + px.x, vUv.y) );","vec4 c31 = texture2D(texture, vec2(vUv.x - px.x, vUv.y + px.y) );","vec4 c32 = texture2D(texture, vec2(vUv.x, vUv.y + px.y) );","vec4 c33 = texture2D(texture, vUv + px );","gl_FragColor = ","c11 * m[0] + c12 * m[1] + c22 * m[2] +","c21 * m[3] + c22 * m[4] + c23 * m[5] +","c31 * m[6] + c32 * m[7] + c33 * m[8];","gl_FragColor.a = c22.a;","}"].join("\n"),T.detectEdges=function(){T.convolution.call(this,[0,1,0,1,-4,1,0,1,0])},T.sobelX=function(){T.convolution.call(this,[-1,0,1,-2,0,2,-1,0,1])},T.sobelY=function(){T.convolution.call(this,[-1,-2,-1,0,0,0,1,2,1])},T.sharpen=function(t){var e=t||1;T.convolution.call(this,[0,-1*e,0,-1*e,1+4*e,-1*e,0,-1*e,0])},T.emboss=function(t){var e=t||1;T.convolution.call(this,[-2*e,-1*e,0,-1*e,1,1*e,0,1*e,2*e])},T.blur=function(t){var i=t/7/l,n=t/7/c,r=b(T.blur.SHADER);e.uniform2f(r.uniform.px,0,n),y(w.INTERMEDIATE),e.uniform2f(r.uniform.px,i,0),y()},T.blur.SHADER=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform vec2 px;","void main(void) {","gl_FragColor = vec4(0.0);","gl_FragColor += texture2D(texture, vUv + vec2(-7.0*px.x, -7.0*px.y))*0.0044299121055113265;","gl_FragColor += texture2D(texture, vUv + vec2(-6.0*px.x, -6.0*px.y))*0.00895781211794;","gl_FragColor += texture2D(texture, vUv + vec2(-5.0*px.x, -5.0*px.y))*0.0215963866053;","gl_FragColor += texture2D(texture, vUv + vec2(-4.0*px.x, -4.0*px.y))*0.0443683338718;","gl_FragColor += texture2D(texture, vUv + vec2(-3.0*px.x, -3.0*px.y))*0.0776744219933;","gl_FragColor += texture2D(texture, vUv + vec2(-2.0*px.x, -2.0*px.y))*0.115876621105;","gl_FragColor += texture2D(texture, vUv + vec2(-1.0*px.x, -1.0*px.y))*0.147308056121;","gl_FragColor += texture2D(texture, vUv                             )*0.159576912161;","gl_FragColor += texture2D(texture, vUv + vec2( 1.0*px.x,  1.0*px.y))*0.147308056121;","gl_FragColor += texture2D(texture, vUv + vec2( 2.0*px.x,  2.0*px.y))*0.115876621105;","gl_FragColor += texture2D(texture, vUv + vec2( 3.0*px.x,  3.0*px.y))*0.0776744219933;","gl_FragColor += texture2D(texture, vUv + vec2( 4.0*px.x,  4.0*px.y))*0.0443683338718;","gl_FragColor += texture2D(texture, vUv + vec2( 5.0*px.x,  5.0*px.y))*0.0215963866053;","gl_FragColor += texture2D(texture, vUv + vec2( 6.0*px.x,  6.0*px.y))*0.00895781211794;","gl_FragColor += texture2D(texture, vUv + vec2( 7.0*px.x,  7.0*px.y))*0.0044299121055113265;","}"].join("\n"),T.pixelate=function(t){var i=t/l,n=t/c,r=b(T.pixelate.SHADER);e.uniform2f(r.uniform.size,i,n),y()},T.pixelate.SHADER=["precision highp float;","varying vec2 vUv;","uniform vec2 size;","uniform sampler2D texture;","vec2 pixelate(vec2 coord, vec2 size) {","return floor( coord / size ) * size;","}","void main(void) {","gl_FragColor = vec4(0.0);","vec2 coord = pixelate(vUv, size);","gl_FragColor += texture2D(texture, coord);","}"].join("\n")},b=i("bc3a"),w=i.n(b),E=w.a.CancelToken,T={name:"App",components:{SimpleKeyboard:f},data:function(){return{pageIndex:0,isInputting:!1,textSvgObj:null,textObj:null,textWidth:0,textHeight:0,input:"",count:4,videoObj:null,maxHeight:500,xmlDoc:null,cancelAjax:null,screenshots:[],isLoading:!1,timestamp:"",shape:"rect",shapeList:["circle","rect","tri"]}},methods:{firstPageAni:function(t){var e=this,i=t.target;setTimeout((function(){i.src="/picture/btn01@x3.png"}),50),setTimeout((function(){i.src="/picture/btn00@x3.png",e.next(t)}),200)},next:function(t){if(4!=this.pageIndex)switch(document.getElementById("button-audio").play(),this.pageIndex+=1,this.pageIndex>=6&&(this.pageIndex-=6),this.pageIndex){case 0:document.getElementById("paint").innerHTML="",document.getElementById("videoel").style.opacity=0,this.$nextTick((function(){document.getElementsByClassName("show0")[0].style.opacity=0,document.getElementsByClassName("btn00")[0].style.opacity=1,document.getElementsByClassName("back-btn0")[0].style.display="none"})),this.input="";break;case 1:document.getElementById("videoel").play(),document.getElementById("videoel").style.opacity=1,setTimeout((function(){document.getElementsByClassName("btn1234")[0].style.display="block",document.getElementsByClassName("back-btn1234")[0].style.display="block",document.getElementsByClassName("btn01234")[0].style.opacity=0}),600);break;case 2:var e=t.target;setTimeout((function(){e.src="/picture/btn1-pressed@x3.png"}),50),setTimeout((function(){document.getElementsByClassName("btn1234")[0].style.display="none",e.src="/picture/btn2@x3.png"}),200),this.takePhoto();break;case 3:break;case 4:var i=this.drawPhoto();this.getSvg(i);var n=t.target;setTimeout((function(){n.src="/picture/btn3-pressed@x3.png"}),50),setTimeout((function(){n.src="/picture/btn4@x3.png"}),200),null==this.xmlDoc&&(this.isLoading=!0),this.drawSvg();break;case 5:break}},back:function(t){var e=t.target;if(setTimeout((function(){e.src="/picture/back-pressed@x3.png"}),50),setTimeout((function(){e.src="/picture/back-normal@x3.png"}),200),document.getElementById("button-audio").play(),4!=this.pageIndex)switch(this.pageIndex-=1,this.pageIndex){case 0:document.getElementById("paint").innerHTML="",document.getElementById("videoel").style.opacity=0,document.getElementsByClassName("btn1234")[0].style.display="none",document.getElementsByClassName("back-btn1234")[0].style.display="none",document.getElementsByClassName("btn01234")[0].style.opacity=1,this.$nextTick((function(){document.getElementsByClassName("show0")[0].style.opacity=0,document.getElementsByClassName("btn00")[0].style.opacity=1})),this.input="";break;case 1:this.input="",document.getElementById("videoel").play(),document.getElementById("videoel").style.opacity=1,"function"===typeof this.cancelAjax&&(this.cancelAjax(),this.cancelAjax=null),null!=this.xmlDoc&&(this.xmlDoc=null);break;case 2:this.pageIndex-=1,this.input="",document.getElementById("videoel").play(),"function"===typeof this.cancelAjax&&(this.cancelAjax(),this.cancelAjax=null),null!=this.xmlDoc&&(this.xmlDoc=null);break;case 3:break}},setText:function(){null==this.textObj?this.textObj=this.textSvgObj.text(this.input):(this.textObj.clear(),this.textObj.text(this.input));var t=this.textObj.node.getBoundingClientRect();this.textWidth=t.width,this.textHeight=t.height},takePhoto:function(){var t=this;this.count=3,document.getElementById("count-audio").play();var e=setInterval((function(){if(document.getElementById("count-audio").play(),t.count-=1,t.count<=0){var i=document.getElementById("overlay");i.style.display="block",document.getElementById("shoot-audio").play(),setTimeout((function(){i.style.display="none"}),500),clearInterval(e),t.count=4,t.videoObj.pause(),t.next()}}),1e3)},drawSvg:function(){var t=this,e=18;if(null!=this.xmlDoc){this.isLoading=!1,console.log(this.xmlDoc);var i=null,n=[];switch(this.shape){case"rect":n=this.xmlDoc.getElementsByTagName("rect"),i=this.addRect;break;case"circle":n=this.xmlDoc.getElementsByTagName("circle"),i=this.addCircle;break;case"tri":n=this.xmlDoc.getElementsByTagName("polygon"),i=this.addTri;break}var r=Object(v["a"])().addTo("#paint").size("100%","100%");r.attr("id","draw"),document.getElementById("videoel").style.opacity=0;for(var a=function(a){setTimeout((function(){a%8==0&&t.addFrame(a/8,a/n.length),document.getElementsByClassName("show1234")[0].style.opacity=a/n.length,i(r,n,a)}),e*a)},o=0;o<n.length;o++)a(o);setTimeout((function(){t.postImages(),t.makeCode(),t.postPoster(),t.pageIndex+=1,t.$nextTick((function(){document.getElementsByClassName("back-btn5")[0].style.display="none"}))}),e*n.length),this.xmlDoc=null}else setTimeout((function(){t.drawSvg()}),500)},addFrame:function(t,e){var i=this,n=document.getElementById("draw").outerHTML,r=document.getElementById("drawFrame"),a=r.getContext("2d"),o=document.createElement("img");o.width=862,o.height=1150,o.onload=function(){r.width=o.width,r.height=o.height,a.clearRect(0,0,r.width,r.height),0!=t&&(a.globalAlpha=e,a.drawImage(document.getElementById("canvasCopy"),0,0,r.width,r.height),a.globalAlpha=1),a.drawImage(o,0,0),i.screenshots[t]=r.toDataURL("image/png")},o.onerror=function(){r.width=o.width,r.height=o.height,a.clearRect(0,0,r.width,r.height),a.translate(862,0),a.scale(-1,1),0!=t&&(a.globalAlpha=e,a.drawImage(document.getElementById("canvasCopy"),0,0,r.width,r.height),a.globalAlpha=1),a.drawImage(o,0,0),i.screenshots[t]=r.toDataURL("image/png")},o.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(n)))},postImages:function(){var t=this,e=new Date,i=function(t){return 2==t.length?t:"0"+t};this.timestamp=i(e.getHours().toString())+i(e.getMinutes().toString())+i(e.getSeconds().toString());var n=this.screenshots,r={url:"http://localhost:3000/make-video",method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify({data:n,timestamp:this.timestamp})};w()(r).then((function(e){console.log(e),t.screenshots=[]}))},postPoster:function(){var t=document.getElementById("sharePoster"),e=t.getContext("2d"),i=document.getElementById("shareBg"),n=document.getElementById("drawFrame"),r=document.getElementById("shareQrcode");e.drawImage(i,0,0,1080,1920,0,0,1080,1920),e.drawImage(n,0,0,862,1150,0,45,1080,1440),e.drawImage(r,0,0,148,148,840,1570,200,200);var a={url:"http://localhost:3000/poster",method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify({data:t.toDataURL("image/png"),timestamp:this.timestamp})};w()(a).then((function(t){console.log(t)}))},addRect:function(t,e,i){var n=parseFloat(e[i].attributes.x.value),r=parseFloat(e[i].attributes.y.value),a=parseFloat(e[i].attributes.width.value),o=parseFloat(e[i].attributes.height.value),s=e[i].attributes.fill.value,l=1150/this.maxHeight;n*=l,r*=l,a*=l,o*=l;var c=t.rect({width:a,height:o,x:n,y:r});c.attr("id","rect"+i),c.attr("fill-rule","nonzero"),c.attr("fill",s),c.attr("fill-opacity",.5)},addCircle:function(t,e,i){var n=parseFloat(e[i].attributes.cx.value),r=parseFloat(e[i].attributes.cy.value),a=parseFloat(e[i].attributes.r.value),o=e[i].attributes.fill.value,s=1150/this.maxHeight;n*=s,r*=s,a*=s;var l=t.circle({cx:n,cy:r,r:a});l.attr("id","circle"+i),l.attr("fill-rule","nonzero"),l.attr("fill",o),l.attr("fill-opacity",.5)},addTri:function(t,e,i){var n=1150/this.maxHeight,r="",a=e[i].attributes.points.value.split(" ");for(var o in a){var s=a[o].split(",");r+=n*parseFloat(s[0]),r+=",",r+=n*parseFloat(s[1]),r+=" "}var l=e[i].attributes.fill.value,c=t.polygon(r);c.attr("id","rect"+i),c.attr("fill-rule","nonzero"),c.attr("fill",l),c.attr("fill-opacity",.5)},setVideoSrc:function(){var t=this,e={audio:!1,video:{width:810,height:1080}};navigator.mediaDevices.getUserMedia(e).then((function(e){t.videoObj.srcObject=e,t.videoObj.onloadedmetadata=function(e){t.videoObj.play()}})).catch((function(t){console.log(t.name+": "+t.message)}))},drawPhoto:function(){var t=this.videoObj.getBoundingClientRect(),e=t.width,i=t.height,n=this.maxHeight,r=this.maxHeight,a=e,o=i;(e>n||i>r)&&(e/i>1?(a=n,o=Math.round(n*(i/e))):(o=r,a=Math.round(r*(e/i))));var s=document.createElement("canvas"),l=s.getContext("2d");s.width=a,s.height=o,l.clearRect(0,0,a,o),l.translate(a,0),l.scale(-1,1),l.drawImage(this.videoObj,0,0,a,o);var c=null,u=document.getElementById("canvas");try{c=new y({canvas:u})}catch(h){console.log(h)}return c.addFilter("brightness",.2),c.addFilter("contrast",.3),c.addFilter("saturation",-.3),c.apply(s),document.getElementById("canvasCopy").src=u.toDataURL("image/png",1),u.toDataURL("image/png",1)},makeCode:function(){var t=document.getElementById("shareQrcode"),e="http://xiaohui.ai/other-upload/"+this.timestamp+".mp4";m.a.toCanvas(t,e,(function(t){t&&console.error(t)}))},xmlParse:function(t){var e=null,i=null;try{e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(t)}catch(n){try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(n){alert(n.message)}}return e},previewFile:function(){var t=document.querySelector("img"),e=document.querySelector("input[type=file]").files[0],i=new FileReader;i.onloadend=function(){t.src=i.result},e?i.readAsDataURL(e):t.src=""},getSvg:function(t){var e=this,i=this,n={url:"http://localhost:3000/getsvg",method:"POST",timeout:0,headers:{"Content-Type":"application/json"},data:JSON.stringify({data:t,shape:i.shape}),cancelToken:new E((function(t){i.cancelAjax=t}))};w()(n).then((function(t){console.log(t),e.xmlDoc=e.xmlParse(t.data.data)}))},onChange:function(t){this.input=t.toUpperCase(),document.getElementById("keyboard-audio").play(),this.setText()},onInputChange:function(t){this.input=t.target.value.replace(/[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF][\u200D|\uFE0F]|[\uD83C|\uD83D|\uD83E][\uDC00-\uDFFF]|[0-9|*|#]\uFE0F\u20E3|[0-9|#]\u20E3|[\u203C-\u3299]\uFE0F\u200D|[\u203C-\u3299]\uFE0F|[\u2122-\u2B55]|\u303D|[\A9|\AE]\u3030|\uA9|\uAE|\u3030/gi,""),this.setText()},setShape:function(t){var e=t.target.src.split("/"),i=e[e.length-1].split(".")[0];this.shape=i}},mounted:function(){this.videoObj=document.getElementById("videoel"),this.textSvgObj=Object(v["a"])().addTo("#inputTextSvg").size("100%","100%"),this.setVideoSrc()}},_=T,I=(i("034f"),Object(p["a"])(_,r,a,!1,null,null,null)),D=I.exports;i("25f5"),i("8092");n["a"].prototype.$ajax=w.a,n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(D)}}).$mount("#app")},8092:function(t,e,i){var n;i("fb6a"),i("d3b7"),i("ac1f"),i("466d"),i("38cf"),i("5319"),i("4a9b"),i("143c"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),function t(e,i,r){function a(s,l){if(!i[s]){if(!e[s]){var c="function"==typeof n&&n;if(!l&&c)return n(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){var i=e[s][1][t];return a(i||t)}),h,h.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof n&&n,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(t,e,i){var n=t("./TypedNeuQuant.js"),r=t("./LZWEncoder.js");function a(){this.page=-1,this.pages=[],this.newPage()}a.pageSize=4096,a.charMap={};for(var o=0;o<256;o++)a.charMap[o]=String.fromCharCode(o);function s(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new a}a.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(a.pageSize),this.cursor=0},a.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var i=0;i<a.pageSize;i++)t+=a.charMap[this.pages[e][i]];return t},a.prototype.writeByte=function(t){this.cursor>=a.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},a.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},a.prototype.writeBytes=function(t,e,i){for(var n=i||t.length,r=e||0;r<n;r++)this.writeByte(t[r])},s.prototype.setDelay=function(t){this.delay=Math.round(t/10)},s.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},s.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},s.prototype.setRepeat=function(t){this.repeat=t},s.prototype.setTransparent=function(t){this.transparent=t},s.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},s.prototype.finish=function(){this.out.writeByte(59)},s.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},s.prototype.setDither=function(t){!0===t&&(t="FloydSteinberg"),this.dither=t},s.prototype.setGlobalPalette=function(t){this.globalPalette=t},s.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},s.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},s.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new n(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},s.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var i=0,n=0;n<e;n++){var r=this.findClosestRGB(255&this.pixels[i++],255&this.pixels[i++],255&this.pixels[i++]);this.usedEntry[r]=!0,this.indexedPixels[n]=r}},s.prototype.ditherPixels=function(t,e){var i={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[2/8,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!i[t])throw"Unknown dithering kernel: "+t;var n=i[t],r=0,a=this.height,o=this.width,s=this.pixels,l=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<a;c++){e&&(l*=-1);for(var u=1==l?0:o-1,h=1==l?o:0;u!==h;u+=l){r=c*o+u;var p=3*r,d=s[p],f=s[p+1],g=s[p+2];p=this.findClosestRGB(d,f,g),this.usedEntry[p]=!0,this.indexedPixels[r]=p,p*=3;for(var m=this.colorTab[p],v=this.colorTab[p+1],x=this.colorTab[p+2],y=d-m,b=f-v,w=g-x,E=1==l?0:n.length-1,T=1==l?n.length:0;E!==T;E+=l){var _=n[E][1],I=n[E][2];if(_+u>=0&&_+u<o&&I+c>=0&&I+c<a){var D=n[E][0];p=r+_+I*o,p*=3,s[p]=Math.max(0,Math.min(255,s[p]+y*D)),s[p+1]=Math.max(0,Math.min(255,s[p+1]+b*D)),s[p+2]=Math.max(0,Math.min(255,s[p+2]+w*D))}}}}},s.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},s.prototype.findClosestRGB=function(t,e,i,n){if(null===this.colorTab)return-1;if(this.neuQuant&&!n)return this.neuQuant.lookupRGB(t,e,i);for(var r=0,a=16777216,o=this.colorTab.length,s=0,l=0;s<o;l++){var c=t-(255&this.colorTab[s++]),u=e-(255&this.colorTab[s++]),h=i-(255&this.colorTab[s++]),p=c*c+u*u+h*h;(!n||this.usedEntry[l])&&p<a&&(a=p,r=l)}return r},s.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var i=this.image,n=0,r=0,a=0;a<e;a++)for(var o=0;o<t;o++)this.pixels[r++]=i[n++],this.pixels[r++]=i[n++],this.pixels[r++]=i[n++],n++},s.prototype.writeGraphicCtrlExt=function(){var t,e;this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4),null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},s.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},s.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},s.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},s.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},s.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},s.prototype.writePixels=function(){var t=new r(this.width,this.height,this.indexedPixels,this.colorDepth);t.encode(this.out)},s.prototype.stream=function(){return this.out},e.exports=s},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(t,e,i){var n=-1,r=12,a=5003,o=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function s(t,e,i,s){var l,c,u,h,p,d,f=Math.max(2,s),g=new Uint8Array(256),m=new Int32Array(a),v=new Int32Array(a),x=0,y=0,b=!1;function w(t,e){g[c++]=t,c>=254&&D(e)}function E(t){T(a),y=p+2,b=!0,P(p,t)}function T(t){for(var e=0;e<t;++e)m[e]=-1}function _(t,e){var i,o,s,l,f,g,x;for(h=t,b=!1,n_bits=h,u=C(n_bits),p=1<<t-1,d=p+1,y=p+2,c=0,l=F(),x=0,i=a;i<65536;i*=2)++x;x=8-x,g=a,T(g),P(p,e);t:while((o=F())!=n)if(i=(o<<r)+l,s=o<<x^l,m[s]!==i){if(m[s]>=0){f=g-s,0===s&&(f=1);do{if((s-=f)<0&&(s+=g),m[s]===i){l=v[s];continue t}}while(m[s]>=0)}P(l,e),l=o,y<1<<r?(v[s]=y++,m[s]=i):E(e)}else l=v[s];P(l,e),P(d,e)}function I(i){i.writeByte(f),remaining=t*e,curPixel=0,_(f+1,i),i.writeByte(0)}function D(t){c>0&&(t.writeByte(c),t.writeBytes(g,0,c),c=0)}function C(t){return(1<<t)-1}function F(){if(0===remaining)return n;--remaining;var t=i[curPixel++];return 255&t}function P(t,e){l&=o[x],x>0?l|=t<<x:l=t,x+=n_bits;while(x>=8)w(255&l,e),l>>=8,x-=8;if((y>u||b)&&(b?(u=C(n_bits=h),b=!1):(++n_bits,u=n_bits==r?1<<r:C(n_bits))),t==d){while(x>0)w(255&l,e),l>>=8,x-=8;D(e)}}this.encode=I}e.exports=s},{}],3:[function(t,e,i){var n=100,r=256,a=r-1,o=4,s=16,l=1<<s,c=10,u=10,h=l>>u,p=l<<c-u,d=r>>3,f=6,g=1<<f,m=d*g,v=30,x=10,y=1<<x,b=8,w=1<<b,E=x+b,T=1<<E,_=499,I=491,D=487,C=503,F=3*C;function P(t,e){var i,d,g,x,b;function E(){var t,e;for(i=[],d=new Int32Array(256),g=new Int32Array(r),x=new Int32Array(r),b=new Int32Array(r>>3),t=0;t<r;t++)e=(t<<o+8)/r,i[t]=new Float64Array([e,e,e,0]),x[t]=l/r,g[t]=0}function P(){for(var t=0;t<r;t++)i[t][0]>>=o,i[t][1]>>=o,i[t][2]>>=o,i[t][3]=t}function A(t,e,n,r,a){i[e][0]-=t*(i[e][0]-n)/y,i[e][1]-=t*(i[e][1]-r)/y,i[e][2]-=t*(i[e][2]-a)/y}function R(t,e,n,a,o){var s,l,c=Math.abs(e-t),u=Math.min(e+t,r),h=e+1,p=e-1,d=1;while(h<u||p>c)l=b[d++],h<u&&(s=i[h++],s[0]-=l*(s[0]-n)/T,s[1]-=l*(s[1]-a)/T,s[2]-=l*(s[2]-o)/T),p>c&&(s=i[p--],s[0]-=l*(s[0]-n)/T,s[1]-=l*(s[1]-a)/T,s[2]-=l*(s[2]-o)/T)}function B(t,e,n){var a,l,d,f,m,v=~(1<<31),y=v,b=-1,w=b;for(a=0;a<r;a++)l=i[a],d=Math.abs(l[0]-t)+Math.abs(l[1]-e)+Math.abs(l[2]-n),d<v&&(v=d,b=a),f=d-(g[a]>>s-o),f<y&&(y=f,w=a),m=x[a]>>u,x[a]-=m,g[a]+=m<<c;return x[b]+=h,g[b]-=p,w}function S(){var t,e,n,o,s,l,c=0,u=0;for(t=0;t<r;t++){for(n=i[t],s=t,l=n[1],e=t+1;e<r;e++)o=i[e],o[1]<l&&(s=e,l=o[1]);if(o=i[s],t!=s&&(e=o[0],o[0]=n[0],n[0]=e,e=o[1],o[1]=n[1],n[1]=e,e=o[2],o[2]=n[2],n[2]=e,e=o[3],o[3]=n[3],n[3]=e),l!=c){for(d[c]=u+t>>1,e=c+1;e<l;e++)d[e]=t;c=l,u=t}}for(d[c]=u+a>>1,e=c+1;e<256;e++)d[e]=a}function k(t,e,n){var a,o,s,l=1e3,c=-1,u=d[e],h=u-1;while(u<r||h>=0)u<r&&(o=i[u],s=o[1]-e,s>=l?u=r:(u++,s<0&&(s=-s),a=o[0]-t,a<0&&(a=-a),s+=a,s<l&&(a=o[2]-n,a<0&&(a=-a),s+=a,s<l&&(l=s,c=o[3])))),h>=0&&(o=i[h],s=e-o[1],s>=l?h=-1:(h--,s<0&&(s=-s),a=o[0]-t,a<0&&(a=-a),s+=a,s<l&&(a=o[2]-n,a<0&&(a=-a),s+=a,s<l&&(l=s,c=o[3]))));return c}function U(){var i,r,a,s,l,c,u=t.length,h=30+(e-1)/3,p=u/(3*e),d=~~(p/n),g=y,x=m,E=x>>f;for(E<=1&&(E=0),i=0;i<E;i++)b[i]=g*((E*E-i*i)*w/(E*E));u<F?(e=1,r=3):r=u%_!==0?3*_:u%I!==0?3*I:u%D!==0?3*D:3*C;var T=0;i=0;while(i<p)if(a=(255&t[T])<<o,s=(255&t[T+1])<<o,l=(255&t[T+2])<<o,c=B(a,s,l),A(g,c,a,s,l),0!==E&&R(E,c,a,s,l),T+=r,T>=u&&(T-=u),i++,0===d&&(d=1),i%d===0)for(g-=g/h,x-=x/v,E=x>>f,E<=1&&(E=0),c=0;c<E;c++)b[c]=g*((E*E-c*c)*w/(E*E))}function L(){E(),U(),P(),S()}function M(){for(var t=[],e=[],n=0;n<r;n++)e[i[n][3]]=n;for(var a=0,o=0;o<r;o++){var s=e[o];t[a++]=i[s][0],t[a++]=i[s][1],t[a++]=i[s][2]}return t}this.buildColormap=L,this.getColormap=M,this.lookupRGB=k}e.exports=P},{}],4:[function(t,e,i){var n,r;n=t("./GIFEncoder.js"),r=function(t){var e,i,r,a;return e=new n(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),r=e.stream(),t.data=r.pages,t.cursor=r.cursor,t.pageSize=r.constructor.pageSize,t.canTransfer?(a=function(){var e,n,r,a;for(r=t.data,a=[],e=0,n=r.length;e<n;e++)i=r[e],a.push(i.buffer);return a}(),self.postMessage(t,a)):self.postMessage(t)},self.onmessage=function(t){return r(t.data)}},{"./GIFEncoder.js":1}]},{},[4])},"85ec":function(t,e,i){}});
//# sourceMappingURL=app.7cffcb79.js.map